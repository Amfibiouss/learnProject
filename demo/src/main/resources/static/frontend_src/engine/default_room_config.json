{		
	"times": [ 
		{"id": "Ночь", "duration": 30000},
		{"id": "День", "duration": 30000}
	],
	
	"finishConditions": [
		{
			"condition": "(fraction(Мафия) or fraction(Нейтрал/Маньяк) or fraction(Нейтрал/Ведьма)) and status(Живой)",
			"winners": "fraction(Город) or (fraction(Нейтрал/Дурак) and status(Мертвый/Казнен))",
			"winText": "Вы победили!",
			"loseText": "Вы проиграли!",
			"winTextAll": "Горожане выгнали мафию из города."
		},
		
		{
			"condition": "(fraction(Город) or fraction(Нейтрал/Маньяк)) and status(Живой)",
			"winners": "fraction(Мафия) or (fraction(Нейтрал/Дурак) and status(Мертвый/Казнен)) or (fraction(Нейтрал/Ведьма) and status(Живой))",
			"winText": "Вы победили!",
			"loseText": "Вы проиграли!",
			"winTextAll": "Мафия получила полное господство над городом"
		},
		
		{
			"condition": "(not(fraction(Нейтрал/Маньяк)) and status(Живой)) or not(equal(fraction(Нейтрал/Маньяк) and status(Живой), 1))",
			"winners": "(fraction(Нейтрал/Маньяк) and status(Живой)) or (fraction(Нейтрал/Дурак) and status(Мертвый/Казнен))",
			"winText": "Вы победили!",
			"loseText": "Вы проиграли!",
			"winTextAll": "Маньяк победил"
		}
	],
	
	"fractions": [
		{"id": "Город"},
		 
		{"id": "Мафия"},
		
		{"id": "Нейтрал"}
	],
	
	"roles": [
		{
			"id": "Радиолюбитель",
			"fraction": "Город",
			"description": "Вы Радиолюбитель. Вы можете слушать и разговаривать с Мафией, при этом ваша личность и личность мафии остаются в секрете.",
			"statuses": ["Живой"],
			"count": 1
		},		
		
		{
			"id": "Медиум",
			"fraction": "Город",
			"description": "Вы Медиум. Вы можете разговаривать с мертвецами, но мертвые не могут узнать вашу личность",
			"statuses": ["Живой"],
			"count": 1
		},		
	
		{
			"id": "Следопыт",
			"fraction": "Город",
			"description": "Вы Следопыт. Вы принадлежите фракции горожан. Вы можете узнать кто приходил к определенному человеку ночью",
			"statuses": ["Живой"],
			"count": 1
		},
				
		{
			"id": "Шериф",
			"fraction": "Город",
			"description": "Вы Шериф. Вы принадлежите фракции горожан. Вы можете узнать ночью является ли игрок мафией",
			"statuses": ["Живой"],
			"count": 1
		},
		
		{
			"id": "Доктор",
			"fraction": "Город",
			"description": "Вы Доктор. Вы принадлежите фракции горожан. Вы можете лечить людей ночью и они выживут при покущении",
			"statuses": ["Живой"],
			"count": 1
		},
		
		{
			"id": "Любовница",
			"fraction": "Город",
			"description": "Вы Любовница. Вы принадлежите фракции горожан. Вы можете лишить способностей игрока на один день и ночь",
			"statuses": ["Живой"],
			"count": 1
		},
		
		{
			"id": "Горожанин",
			"fraction": "Город",
			"description": "Вы простой трудяга. Вы принадлежите фракции горожан.",
			"statuses": ["Живой"],
			"count": 11
		},
		
		{
			"id": "Мафия",
			"fraction": "Мафия",
			"description": "Убивай, убивай, убивай!",
			"statuses": ["Живой"],
			"count": 1
		},
		
		{
			"id": "Дурак",
			"fraction": "Нейтрал/Дурак",
			"description": "Ваша цель - быть убитым на дневном голосовании. После победы вы превращаетесь в призрака и терроризируете одного из своих убийц.",
			"statuses": ["Живой"],
			"count": 1
		},
		
		{
			"id": "Маньяк",
			"fraction": "Нейтрал/Маньяк",
			"description": "Ваша цель - убить всех.",
			"statuses": ["Живой"],
			"count": 1
		},
		
		{
			"id": "Дон",
			"fraction": "Мафия",
			"description": "Ваша цель - уничтожить Город. Руководите мафией. Вас не может раскрыть Шериф.",
			"statuses": ["Живой"],
			"count": 1
		},
		
		{
			"id": "Ведьма",
			"fraction": "Нейтрал/Ведьма",
			"description": "Ваша цель - уничтожить Город и выжить. Выберите жертву днем, которую будете контролировать ночью.",
			"statuses": ["Живой"],
			"count": 1
		}
	],
	
	"abilities": [
		
		{
			"id": "Дневное голосование",
			"description": "Умрет тот, за кого проголосовало больше. При равном количество голосов никто не умирает.",
			"candidates": "status(Живой) and not(status(player/$user.name))",
			"canUse": "time(День) and status(Живой) and not(status(Заблокирован))",
			"channel": "Общий",
			"rule": "most_voted",
			"showVotes": true,
			"actions": ["Казнь"]
		},
		
		{
			"id": "Контроль",
			"description": "Выберите человека, которого хотите подчинить и управлять которым будете ночью. Также вы узнаете его роль.",
			"candidates": "status(Живой) and not(status(player/$user.name))",
			"canUse":  "time(День) and role(Ведьма) and status(Живой)",
			"rule": "each_voted",
			"actions": ["Контроль"]
		},
		
		{
			"id": "Месть Дурака",
			"description": "Выберите человека, которому хотите отомстить.",
			"candidates": "status(Живой) and status(Метка Дурака/$user.name)",
			"canUse":  "time(Ночь) and role(Дурак) and status(Мертвый/Казнен) and not(status(Месть окончена))",
			"rule": "each_voted",
			"autoVote": true,
			"actions": ["Атака Дурака"]
		},
		
		{
			"id": "Выборы Дона",
			"description": "Выберите человека, которого хотите избрать новым Доном.",
			"candidates": "status(Живой) and role(Мафия)",
			"canUse":  "time(Ночь) and equal(role(Дон) and status(Живой), 0) and greather(role(Дон) and status(Мертвый), 0) and fraction(Мафия) and status(Живой)",
			"rule": "most_voted",
			"autoVote": true,
			"actions": ["Назначение Дона"]
		},
		
		{
			"id": "Любовь",
			"description": "Выберите человека,  которого вы хотите лишить способностей этой ночью и днем.",
			"candidates": "status(Живой) and not(status(player/$user.name))",
			"canUse":  "time(Ночь) and role(Любовница) and status(Живой) and not(status(Заблокирован))",
			"rule": "each_voted",
			"actions": ["Блок"]
		},
		
		{
			"id": "Расследование",
			"description": "Выберите человека, фракцию которого вы хотите узнать ночью.",
			"candidates": "status(Живой) and not(status(player/$user.name))",
			"canUse":  "time(Ночь) and role(Шериф) and status(Живой) and not(status(Заблокирован))",
			"rule": "each_voted",
			"actions": ["Расследование"]
		},
		
		{
			"id": "Ночное голосование",
			"description": "Умрет тот, за кого проголосовало больше. При равном количество голосов никто не умирает.",
			"candidates": "not(fraction(Мафия)) and status(Живой)",
			"canUse":  "time(Ночь) and (role(Мафия) or role(Дон)) and status(Живой) and not(status(Заблокирован))",
			"rule": "most_voted",
			"actions": ["Атака Мафии"]
		},
		
		{
			"id": "Охота",
			"description": "Выберите человека, которого хотите ВЖИК ВЖИК.",
			"candidates": "status(Живой) and not(status(player/$user.name))",
			"canUse":  "time(Ночь) and role(Маньяк) and status(Живой)",
			"rule": "each_voted",
			"actions": ["Охота"]
		},	
		
		{
			"id": "Лечение",
			"description": "Выберите человека, которого хотите защитить ночью.",
			"candidates": "status(Живой) and not(status(player/$user.name))",
			"canUse":  "time(Ночь) and role(Доктор) and status(Живой) and not(status(Заблокирован))",
			"rule": "each_voted",
			"actions": ["Лечение"]
		},
		
		{
			"id": "Слежка",
			"description": "Выберите человека, имена ночных посетителей которого вы хотите узнать",
			"candidates": "status(Живой)",
			"canUse":  "time(Ночь) and role(Следопыт) and status(Живой) and not(status(Заблокирован))",
			"rule": "each_voted",
			"actions": ["Слежка"]
		}	
	],
	
	"channels": [
		{
			"id": "Общий",
			"canRead": "all()",
			"canWrite":  "time(День) and status(Живой)",
			"color": "#007700"
		},
		
		{
			"id": "Мертвые",
			"canRead":  "status(Мертвый) or role(Медиум)",
			"canWrite":  "status(Мертвый)",
			"canAnonymousWrite":  "role(Медиум) and status(Живой)",
			"color": "#880088"
		},
		
		{
			"id": "Мафия",
			"canRead": "fraction(Мафия)",
			"canAnonymousRead":  "role(Радиолюбитель) and status(Живой)",
			"canWrite":  "fraction(Мафия) and status(Живой)",
			"canAnonymousWrite":  "role(Радиолюбитель) and status(Живой)",
			"color": "#aa0000"
		},
		
		{
			"id": "Последнее слово",
			"canRead":  "all()",
			"canWrite":  "status(Последнее слово)",
			"color": "#875f42"
		}
	],
	
	"actions": [
	
		{
			"id": "Казнь",
			
			"reactions": [
				{
					"condition": "status(Живой) and role(Дурак)",
					"addTargetStatuses": ["Мертвый/Казнен", "Последнее слово"],
					"removeTargetStatuses": ["Живой"],
					"addDirectUsersStatuses": ["Метка Дурака/$user.name"],
					"informAll": "$target.name был казнен. Он превратился в мстительного духа!",
					"informTarget": "Вас казнили!",
					"stop": true
				},
			
				{
					"condition": "status(Живой)",
					"addTargetStatuses": ["Мертвый/Казнен", "Последнее слово"],
					"removeTargetStatuses": ["Живой"],
					"informAll": "$target.name был казнен. Его роль - $target.role.",
					"informTarget": "Вас казнили!",
					"stop": true
				}
			]
		},
		
		{
			"id": "Атака Дурака",
			"reactions": [
				{
					"condition": "status(Живой)",
					"addTargetStatuses": ["Мертвый/Убит дураком", "Последнее слово"],
					"addUserStatuses": ["Месть окончена"],
					"removeTargetStatuses": ["Живой"],
					"informAll": "Призрак дурака утащил $target.name за собой.",
					"informTarget": "Призрак дурака пришел за вами!"
				}
			]
		},
		
		{
			"id": "Атака Мафии",
			
			"reactions": [
				{
					"condition": "all()",
					"addUserStatuses": ["След/$user.name"],
					"propagate": true
				},
				
				{
					"condition": "status(Мертвый)",

					"inform": [
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Ваш подчиненный вместе с Мафией пошли убивать $target.name, но цель уже была мертва."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы хотели напасть на $target.name, но цель уже была мертва."
						},
						
						{
							"address": "((fraction(Мафия) and not(status(player/$user.name))) or status(Следит за мафией)) and not(status(Забывчивый))",
							"text": "$user.name хотел напасть на $target.name, но цель уже была мертва."
						}
					],
					"stop": true
				},
				
				{
					"condition": "status(Живой) and role(Маньяк)",
					
					"inform": [
						{
							"address": "status(player/$target.name) and not(status(Забывчивый))",
							"text": "На вас напали, но вы отбили нападение."
						},
					
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Вы напали на $target.name, контролируя $user.name, но не смогли его убить."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы напали на $target.name, но не смогли его убить."
						},
						
						{
							"address": "((fraction(Мафия) and not(status(player/$user.name))) or status(Следит за мафией)) and not(status(Забывчивый))",
							"text": "$user.name хотел напасть на $target.name, но цель отбила нападение. Вы решаете отступить."
						}
					],
					
					"stop": true
				},
				
				{
					"condition": "status(Живой)",
					"removeTargetStatuses": ["Живой"],
					"addTargetStatuses": ["Мертвый/Убит мафий", "Последнее слово"],
					
					"inform": [
						{
							"address": "status(player/$target.name) and not(status(Забывчивый))",
							"text": "Вас убили!"
						},
					
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Вы успешно напали на $target.name, контролируя $user.name."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы успешно напали на $target.name."
						},
						
						{
							"address": "((fraction(Мафия) and not(status(player/$user.name))) or status(Следит за мафией)) and not(status(Забывчивый))",
							"text": "$user.name успешно напал на $target.name. Дело сделано."
						}
					],
					
					"stop": true
				}
			]
		},
		
		{
			"id": "Охота",
			
			"reactions": [
				{
					"condition": "all()",
					"addUserStatuses": ["След/$user.name"],
					"propagate": true
				},
				
				{
					"condition": "status(Мертвый)",

					"inform": [
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Вы хотели напасть на $target.name, контролируя $user.name, но цель уже была мертва."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы хотели напасть на $target.name, но цель уже была мертва."
						}
					],
					"stop": true
				},
				
				{
					"condition": "status(Живой) and role(Маньяк)",
					
					"inform": [
						{
							"address": "status(player/$target.name) and not(status(Забывчивый))",
							"text": "На вас напали, но вы отбили нападение"
						},
					
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Вы напали на $target.name, контролируя $user.name, но не смогли его убить."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы напали на $target.name, но не смогли его убить."
						}
					],
					
					"stop": true
				},
				
				{
					"condition": "status(Живой)",
					"removeTargetStatuses": ["Живой"],
					"addTargetStatuses": ["Мертвый/Убит маньяком", "Последнее слово"],
					
					"inform": [
						{
							"address": "status(player/$target.name) and not(status(Забывчивый))",
							"text": "Вас убили!"
						},
					
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Вы успешно напали на $target.name, контролируя $user.name."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы успешно напали на $target.name."
						}
					],
					
					"stop": true
				}
			]
		},
		
		{
			"id": "Назначение Дона",
			
			"reactions": [
				{
					"condition": "status(Мертвый)",
					"inform": [
						{
							"address": "(fraction(Мафия) or status(Следит за мафией)) and not(status(Забывчивый))",
							"text": "Кандидат в Дона умер прямо перед назначением."
						}
					],
					"stop": true
				},
				
				{
					"condition": "status(Живой) and not(role(Дон))",
					"addTargetStatuses": ["role/Дон"],
					"removeTargetStatuses": ["role/Мафия"],
					"inform": [
						{
							"address": "(fraction(Мафия) or status(Следит за мафией)) and not(status(Забывчивый))",
							"text": "Новый Дон выбран! Это $target.name."
						}
					],
					"informTarget": "Вы новый Дон. Руководите мафией. У вас есть защита от проверок Шерифа.",
					"stop": true
				}				
			]
		},
		
		{
			"id": "Контроль",
			
			"reactions": [
				
				{
					"condition": "status(Мертвый)",
					"inform": [
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы почти взяли свою цель под контроль, но она умерла."
						}
					]
				},
				
				{
					"condition": "status(Под контролем)",
					"inform": [
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Кто-то другой уже взял контроль над этой целью!"
						}
					]
				},
				
				{
					"condition": "role(Ведьма)",
					"inform": [
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "У цели иммунитет к контролю."
						}
					]
				},
				
				{
					"condition": "fraction(Мафия)",
					"addUserStatuses": ["Следит за мафией"],
					"propagate": true
				},		
				
				{
					"condition": "status(Живой)",
					"addTargetStatuses": ["controlledBy/$user.name", "Под контролем", "Забывчивый"],
					"addUserStatuses": ["Контролирует/$user.name"],
					"inform": [
						{
							"address": "status(player/$target.name)",
							"text": "Вы чувствуете, как вами манипулирует сверьхестественная сила."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы подчинили $target.name. Его роль - $target.role."
						}
					]
				}				
			]
		},
		
		{
			"id": "Лечение",
			
			"reactions": [
				{
					"condition": "all()",
					"addUserStatuses": ["След/$user.name"],
					"propagate": true
				},
				
				{
					"condition": "status(Мертвый)",
					"addTargetStatuses": ["Живой"],
					"removeTargetStatuses": ["Мертвый", "Последнее слово"],
					
					"inform": [
						{
							"address": "status(player/$target.name) and not(status(Забывчивый))",
							"text": "Вас кто-то подлечил ночью."
						},
					
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Вы вылечили $target.name от ран и спасли его жизнь, контролируя $user.name"
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы вылечили $target.name от ран и спасли его жизнь."
						}
					]
				}	
			]
		},
		
		{
			"id": "Блок",
			
			"reactions": [
				{
					"condition": "all()",
					"addUserStatuses": ["След/$user.name"],
					"propagate": true
				},
			
				
				{
					"condition": "status(Мертвый)",
					"inform": [
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Вы хотели очаровать $target.name, контролируя $user.name, но обнаружили цель мертвой."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы хотели очаровать $target.name, но обнаружили цель мертвой."
						}
					]
				},
				
				{
					"condition": "status(Живой) and role(Маньяк)",
					"addUserStatuses": ["Мертвый"],
					"removeUserStatuses": ["Живой"],
					"informTarget": "Вы убили $user.name когда он пришел к вам в гости.",
					"informAll": "$user.name был жестоко убит не оставив завещания. Его роль $user.role.",
					"inform": [
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Вы хотели очаровать $target.name, контролируя $user.name, но цель безжалостно убила вашего подчиненного."
						},
						
						{
							"address": "status(player/$user.name)",
							"text": "Вы пришли к $target.name и он убил вас!"
						}
					]
					
				},
				
				{
					"condition": "status(Живой)",
					"addTargetStatuses": ["Заблокирован"],
					"informTarget": "К вам пришла любовница. Вы берете отпуск!",
					"inform": [
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Вы очаровали $target.name, контролируя $user.name."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы очаровали $target.name."
						}
					]
				}			
			]
		},
		
		{
			"id": "Расследование",
			
			"reactions": [
				{
					"condition": "all()",
					"addUserStatuses": ["След/$user.name"],
					"propagate": true
				},
				
				{
					"condition": "role(Дон)",
					
					"inform": [
						{
							"address": "status(player/$target.name) and not(status(Забывчивый))",
							"text": "Кто-то пытался раскрыть к какой фракции вы принадлежите и он наивно решил, что вы из фракции Города."
						},
					
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Ваш подчиненный $user.name провел расследование в отношении $target.name. Он принадлежит фракции Город."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы провели расследование в отношении $target.name. Он принадлежит фракции Город."
						}
					]
				},
			
				{
					"condition": "all()",
					"inform": [
						{
							"address": "status(player/$target.name) and not(status(Забывчивый))",
							"text": "Кто-то раскрыл к какой фракции вы принадлежите."
						},
					
						{
							"address": "status(Контролирует/$user.name) and not(status(Забывчивый))",
							"text": "Ваш подчиненный $user.name провел расследование в отношении $target.name. Он принадлежит фракции $target.fraction."
						},
						
						{
							"address": "status(player/$user.name) and not(status(Забывчивый))",
							"text": "Вы провели расследование в отношении $target.name. Он принадлежит фракции $target.fraction."
						}
					]
				}				
			]
		},
		
		{
			"id": "Слежка",
			
			"reactions": [
				{
					"condition": "all()",
					"affect": [
						{
							"address": "(status(player/$user.name) or status(Контролирует/$user.name)) and not(status(Забывчивый))",
							"addStatuses": ["Метка Следопыта/$user.name"]
						}
					]
				}			
			]
		},
		
		{
			"id": "Информировать Следопыта",
			
			"reactions": [
				{
					"condition": "all()",
					"inform": [{
						"address": "status(Метка Следопыта/$user.name) and not(status(Забывчивый))",
						"text": "$target.name посещал ночью $user.name"
					}]
				}
			]
		},
		
		{
			"id": "Снять контроль",
			
			"reactions": [
				{
					"condition": "all()",
					"removeTargetStatuses": ["controlledBy/$user.name"],
					"informTarget": "Вы чувствуете, что контроль над телом возвращается..."
				}
			]
		}
	],
	
	"statuses": [
		{
			"id": "Мертвый",
			"duration": -1
		},
		
		{
			"id": "Живой",
			"duration": -1
		},
		
		{
			"id": "Заблокирован",
			"duration": 1
		},
		
		{
			"id": "След",
			"duration": 0.5,
			"expireAction": "Информировать Следопыта"
		},
		
		{
			"id": "Метка Следопыта",
			"duration": 1
		},
		
		{
			"id": "Метка Дурака",
			"duration": -1
		},
		
		{
			"id": "Месть окончена",
			"duration": -1
		}, 
		
		{
			"id": "Последнее слово",
			"duration": 1
		},
		
		{
			"id": "Контролирует",
			"duration": 2
		},
		
		{
			"id": "Следит за мафией",
			"duration": 2
		},
		
		{
			"id": "Под контролем",
			"duration": 1.5,
			"expireAction": "Снять контроль"
		},
		
		{
			"id": "Забывчивый",
			"duration": 2
		}
	]
}